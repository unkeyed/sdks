/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { apisCreateApi } from "../../funcs/apisCreateApi.js";
import * as components from "../../models/components/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: components.V2ApisCreateApiRequestBody$inboundSchema,
};

export const tool$apisCreateApi: ToolDefinition<typeof args> = {
  name: "apis-create-api",
  description: `Create API namespace

Create an API namespace for organizing keys by environment, service, or product.

Use this to separate production from development keys, isolate different services, or manage multiple products. Each API gets a unique identifier and dedicated infrastructure for secure key operations.

**Important**: API names must be unique within your workspace and cannot be changed after creation.

**Required Permissions**

Your root key must have one of the following permissions:
- \`api.*.create_api\` (to create APIs in any workspace)
`,
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await apisCreateApi(
      client,
      args.request,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
