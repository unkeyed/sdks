overlay: 1.0.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Overlay current.yaml => wanted.yaml
  version: 0.0.0
actions:
  - target: $["components"]["schemas"]["V2KeysCreateKeyRequestBody"]["properties"]
    update:
      remainingCredits:
        "$ref": "#/components/schemas/KeyCreditsData"
        description: |
          Controls usage-based limits through credit consumption with optional automatic refills.
          Unlike rate limits which control frequency, credits control total usage with global consistency.
          Essential for implementing usage-based pricing, subscription tiers, and hard usage quotas.
          Omitting this field creates unlimited usage, while setting null is not allowed during creation.
  - target: $["components"]["schemas"]["V2KeysCreateKeyRequestBody"]["properties"]["credits"]
    remove: true
  - target: $["components"]["schemas"]["V2KeysUpdateKeyRequestBody"]["properties"]
    update:
      remainingCredits:
        "$ref": "#/components/schemas/KeyCreditsData"
        description: |
          Controls usage-based limits for this key through credit consumption.
          Omitting this field preserves current credit settings, while setting null enables unlimited usage.
          Cannot configure refill settings when credits is null, and refillDay requires monthly interval.
          Essential for implementing usage-based pricing and subscription quotas.
  - target: $["components"]["schemas"]["V2KeysUpdateKeyRequestBody"]["properties"]["credits"]
    remove: true
  - target: $["components"]["schemas"]["V2KeysVerifyKeyRequestBody"]["properties"]
    update:
      remainingCredits:
        "$ref": "#/components/schemas/KeysVerifyKeyCredits"
  - target: $["components"]["schemas"]["V2KeysVerifyKeyRequestBody"]["properties"]["credits"]
    remove: true
  - target: $["components"]["schemas"]["KeyResponseData"]["properties"]
    update:
      remainingCredits:
        "$ref": "#/components/schemas/KeyCreditsData"
  - target: $["components"]["schemas"]["KeyResponseData"]["properties"]["credits"]
    remove: true
  - target: $["components"]["schemas"]["V2KeysVerifyKeyResponseData"]["properties"]
    update:
      remainingCredits:
        type: integer
        format: int32
        description: |
          The number of requests/credits remaining for this key. If null
          or not present, the key has unlimited usage. This value decreases with
          each verification (based on the 'cost' parameter) unless explicit credit
          refills are configured.
  - target: $["components"]["schemas"]["V2KeysVerifyKeyResponseData"]["properties"]["credits"]
    remove: true
